<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="  
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd  
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <description>Shiro 配置</description>

 <!--    <bean id="casFilter" class="com.ctrip.cc.selfservice.shiro.filter.ShiroCasFilter">
        配置验证错误时的失败页面 
        <property name="failureUrl" value="/static/no-permission.jsp"/>
    </bean> -->
    
    <bean id="shiroFilter" class="org.apache.shiro.spring.web.ShiroFilterFactoryBean">
    	<!-- Shiro的核心安全接口,这个属性是必须的 -->  
        <property name="securityManager" ref="securityManager"/>
        <!-- 要求登录时的链接(可根据项目的URL进行替换),非必须的属性,默认会自动寻找Web工程根目录下的"/login.jsp"页面 --> 
        <property name="loginUrl" value="/login"/>
        <property name="successUrl" value="/"/>
        <!-- 用户访问未对其授权的资源时,所显示的连接 -->
        <property name="unauthorizedUrl" value="/static/no-permission.jsp"/>
        <property name="filters">
            <util:map>
              <!--   <entry key="casFilter" value-ref="casFilter"/>
				<entry key="authc">
					<bean
						class="com.ctrip.cc.selfservice.shiro.filter.MyFormAuthenticationFilter">
					</bean>
				</entry> -->
            </util:map>
        </property>

        <!-- 读取自定义权限内容-->
        <property name="filterChainDefinitions">
            <value>
            	<!-- /shiro-cas = casFilter -->
            	/addUser/** = anon
                /login = anon
                /static/** = anon
                /static/no-permission.jsp = anon
                /** = authc
				<!-- /home* = roles["adminHome"] -->
            </value>
        </property>
    </bean>
    
    <!-- 继承自AuthorizingRealm的自定义Realm,即指定Shiro验证用户登录的类为自定义的myRealm.java -->  
     <bean id="myRealm" class="com.lora.shiro.myRealm">
    </bean>

	<!-- 这里主要是设置自定义的单Realm应用,若有多个Realm,可使用'realms'属性代替 -->
    <bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager">
       <!--  设置自定义realm  ref="iniRealm,mySecurityRealm" -->
       <!--  <property name="realms">
            <set>
                <ref bean="casRealm"/>
            </set>
        </property> -->
        <property name="realm" ref="myRealm"/>
    </bean>
    
    
<!--
	<bean
		class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
		<property name="staticMethod"
			value="org.apache.shiro.SecurityUtils.setSecurityManager" />
		<property name="arguments" ref="securityManager" />
	</bean>

	<bean
		class="org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor">
		<property name="securityManager" ref="securityManager" />
	</bean> -->
	    
</beans>  

